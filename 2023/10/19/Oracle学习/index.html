<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Oracle学习 | Apin | blogs</title>

  
  <meta name="author" content="a-pin">
  

  
  <meta name="description" content="This is a blog website in order to record my study experiences!">
  

  
  <meta name="keywords" content="blog,a-pin">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Oracle学习"/>

  <meta property="og:site_name" content="Apin"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Apin" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  
  <link href="https://fonts.lug.ustc.edu.cn/css?family=Lato|Rubik" rel="stylesheet">
  <script src="/js/pangu-407.min.js"></script>
<meta name="generator" content="Hexo 6.3.0"></head>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    pangu.autoSpacingPage();
  });
</script>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Apin</a>
    </h1>
    <p class="site-description">blogs</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/archives">归档</a></li>
      
        <li><a href="/categories">分类</a></li>
      
        <li><a href="/tags">标签</a></li>
      
        <li><a href="/about">关于</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>Oracle学习</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2023/10/19/Oracle学习/" rel="bookmark">
        <time class="entry-date published" datetime="2023-10-19T09:00:07.000Z">
          2023-10-19
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        

<script type="text/javascript">
    function convertRemToPixels(rem) {    
        return rem * parseFloat(getComputedStyle(document.documentElement).fontSize);
    }
    window.onscroll = function() {
        var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        if (scrollTop > convertRemToPixels(40)) {
            document.getElementsByClassName('toc-article')[0].style.visibility = 'visible';
        } else {
            document.getElementsByClassName('toc-article')[0].style.visibility = 'hidden';
        }
    }

</script>


<div id="toc" class="toc-article" style="overflow-y: scroll; height: 80%;">
      <div class="toc-content">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Oracle-%E7%AE%80%E4%BB%8B"><span class="toc-text">Oracle 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84"><span class="toc-text">组成结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Oracle-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">Oracle 数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Oracle-%E5%AE%9E%E4%BE%8B"><span class="toc-text">Oracle 实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Oracle-19c"><span class="toc-text">Oracle 19c</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%EF%BC%88RPM%EF%BC%89"><span class="toc-text">安装（RPM）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5"><span class="toc-text">连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E8%87%AA%E5%90%AF%E5%8A%A8"><span class="toc-text">服务自启动</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PL-x2F-SQL%EF%BC%88Windows%EF%BC%89"><span class="toc-text">PL&#x2F;SQL（Windows）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">远程连接数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-text">安装与配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9B%B8%E5%85%B3"><span class="toc-text">防火墙相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#systemctl"><span class="toc-text">systemctl</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#firewall-cmd"><span class="toc-text">firewall-cmd</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Oracle-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-text">Oracle 基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Select-%E8%AF%AD%E5%8F%A5"><span class="toc-text">Select 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Oracle-By-%E8%AF%AD%E5%8F%A5"><span class="toc-text">Oracle By 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Where-%E5%AD%90%E5%8F%A5"><span class="toc-text">Where 子句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fetch-%E5%AD%90%E5%8F%A5"><span class="toc-text">Fetch 子句</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Oracle-%E4%BA%8B%E5%8A%A1"><span class="toc-text">Oracle 事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#COMMIT-%E8%AF%AD%E5%8F%A5"><span class="toc-text">COMMIT 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ROLLBACK-%E8%AF%AD%E5%8F%A5"><span class="toc-text">ROLLBACK 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SET-TRANSACTION-%E8%AF%AD%E5%8F%A5"><span class="toc-text">SET TRANSACTION 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LOCK-TABLE-%E8%AF%AD%E5%8F%A5"><span class="toc-text">LOCK TABLE 语句</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Oracle-%E5%A4%96%E9%94%AE"><span class="toc-text">Oracle 外键</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Oracle-%E5%A4%96%E9%94%AE%E5%88%9B%E5%BB%BA"><span class="toc-text">Oracle 外键创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Oracle-%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE"><span class="toc-text">Oracle 删除外键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Oracle-%E7%A6%81%E7%94%A8-x2F-%E5%90%AF%E7%94%A8%E5%A4%96%E9%94%AE"><span class="toc-text">Oracle 禁用&#x2F;启用外键</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Oracle-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-text">Oracle 字符串函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ASCII-%E5%87%BD%E6%95%B0"><span class="toc-text">ASCII 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ASCIISTR-%E5%87%BD%E6%95%B0"><span class="toc-text">ASCIISTR 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CHR-%E5%87%BD%E6%95%B0"><span class="toc-text">CHR 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#COMPOSE-%E5%87%BD%E6%95%B0"><span class="toc-text">COMPOSE 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CONCAT-%E5%87%BD%E6%95%B0"><span class="toc-text">CONCAT 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">|| 连接运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CONVERT-%E5%87%BD%E6%95%B0"><span class="toc-text">CONVERT 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DUMP-%E5%87%BD%E6%95%B0"><span class="toc-text">DUMP 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#INITCAP-%E5%87%BD%E6%95%B0"><span class="toc-text">INITCAP 函数</span></a></li></ol></li></ol>
      </div>
</div>
<style>
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>



        <p>文章若有侵犯版权，请联系作者，我将迅速修改！</p>
<h1 id="Oracle-简介"><a href="#Oracle-简介" class="headerlink" title="Oracle 简介"></a>Oracle 简介</h1><p>Oracle 数据库系统是美国 Oracle 公司提供的以分布式数据库为核心的一组软件产品，是目前世界上使用最为广泛的数据库管理系统；</p>
<ul>
<li>作为一个通用的数据库系统，它具有完整的数据管理功能；</li>
<li>作为一个关系型数据库，它是一个完备关系的产品；</li>
<li>作为分布式数据库，它实现了分布式处理功能；</li>
</ul>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><ul>
<li><p><strong>数据文件</strong></p>
<p>  数据文件是数据库的物理存储单位，而表空间 TableSpace  则是数据库的逻辑组成部分；</p>
<p>  数据库的数据是存储在表空间中的，而一个表空间可以有一个或多个数据文件组成，一个数据文件只能属于一个表空间；</p>
</li>
<li><p><strong>表空间</strong></p>
<p>  表空间是 Oracle 对物理数据库上相关数据文件（ORA 或 DBF）的逻辑映射。</p>
<p>  一个数据库在逻辑上被划分成一个到若干个表空间，每个表空间包含了在逻辑上相关联的一组结构。每个数据库至少有一个表空间，每个表空间由同一磁盘上的一个或多个文件组成，这些文件叫做数据库文件。</p>
</li>
<li><p><strong>用户</strong></p>
<p>  用户是在实例下建立的，不同实例中可以建立相同名字的用户；</p>
<p>  注意：表的数据，是由用户放入某一个表空间的，而这个表空间会随机把这些表数据放到一个或者多个数据文件中。</p>
<p>  由于 Oracle 的数据库不是普通的概念，Oracle 是由用户和表空间对数据进行管理和存放的。但是表不是由表空间去查询的，而是由用户去查的。因为不同用户可以在同一个表空间建立同一个名字的表；</p>
</li>
</ul>
<br>

<h2 id="组成结构"><a href="#组成结构" class="headerlink" title="组成结构"></a>组成结构</h2><p>Oracle 数据库服务器由一个数据库和至少一个数据库实例组成。数据库是一组存储数据的文件，而数据库实例则是管理数据库文件的内存结构；</p>
<img src="4.png" style="zoom: 50%;" />

<br>

<h3 id="Oracle-数据库"><a href="#Oracle-数据库" class="headerlink" title="Oracle 数据库"></a>Oracle 数据库</h3><p><strong>物理存储结构</strong>：</p>
<p>物理存储结构是存储数据的纯文件。当执行一个 CREATE DATABASE 语句来创建一个新的数据库时，将创建下列文件：</p>
<ul>
<li>数据文件：包含真实数据，逻辑数据库结构的数据被物理存储在数据文件中；</li>
<li>控制文件：每个 Oracle 数据库都有一个包含元数据的控制文件。元数据是用来描述包括数据库名称和数据文件位置的数据库物理结构；</li>
<li>联机重做日志文件：每个 Oracle 数据库都有一个由重做条目组成的联机重做日志，里面包含两个或多个联机重做日志文件，能够记录下所有对数据进行的更改；</li>
</ul>
<p><strong>逻辑存储结构</strong>：</p>
<p>Oracle 数据库使用逻辑存储结构对磁盘空间使用情况进行精细控制。</p>
<ul>
<li>数据块（Data blocks）：Oracle 将数据存储在数据块中，对应于磁盘上的字节数；</li>
<li>范围（Extents）：用于存储特定类型信息的逻辑连续数据块的具体数量；</li>
<li>段（Segments）：指分配用于存储用户对象的一组范围；</li>
<li>表空间（Tablespaces）：直接构成数据库的逻辑存储单元，是段的逻辑容器；</li>
</ul>
<img src="5.png" style="zoom:80%;" />

<br>

<h3 id="Oracle-实例"><a href="#Oracle-实例" class="headerlink" title="Oracle 实例"></a>Oracle 实例</h3><p>Oracle 实例是客户端应用程序（用户）与数据库之间的接口。Oracle 实例由三个主要部分组成：<strong>系统全局区</strong>（SGA）、<strong>程序全局区</strong>（PGA）和<strong>后台进程</strong>；</p>
<p>数据库实例名（INSTANCE_NAME）用于和操作系统关联，在操作系统中要取得与数据库之间的交互必须使用数据库实例名，每个数据库对应唯一的实例，默认情况下数据库名和数据库实例名是相同的。</p>
<p>以下是 Oracle 实例的主要后台进程：</p>
<ul>
<li>PMON：调节所有其他进程的进程监视器；</li>
<li>SMON：执行系统级清理操作的系统监视进程；</li>
<li>DBWn：数据库编写器，从内存读取数据并将其写回到磁盘；</li>
<li>CKPT：检查点进程。在 Oracle 中，磁盘上的数据称为块，内存中的数据称为缓冲区；当该块写入缓冲区并更改时，缓冲区变脏，需要将其写入磁盘；</li>
<li>LGWR：日志写入过程，是可恢复架构的关键；</li>
</ul>
<br>

<h1 id="Oracle-19c"><a href="#Oracle-19c" class="headerlink" title="Oracle 19c"></a>Oracle 19c</h1><p>Oracle 19c，或者说是 Oracle 12.2.0.3，是 12c 中稳定的版本；</p>
<p>Oracle 19c 将稳定性作为此版本的核心目标，开发人员专注于修复已知问题，而不是添加新功能；</p>
<br>

<h2 id="安装（RPM）"><a href="#安装（RPM）" class="headerlink" title="安装（RPM）"></a>安装（RPM）</h2><p>使用手工方式，通过 RPM 安装 19c 数据库，只需要两步操作：</p>
<ol>
<li><p>安装 oracle-database-preinstall-19c.x86_64；</p>
<p> oracle-database-preinstall-19c.x86_64 是一种预安装程序，它会在安装 Oracle 数据库之前进行一些必要的设置和配置，以确保系统能够顺利的安装与运行；</p>
<p> 如果 OEL（Oracle 企业版 Linux）平台，只需要执行：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install oracle-database-preinstall-19c</span><br></pre></td></tr></table></figure>

<p> 如果不是 OEL 平台，可以在官网搜索下载：</p>
<p> <a target="_blank" rel="noopener" href="https://yum.oracle.com/repo/OracleLinux/OL7/latest/x86_64/index.html">https://yum.oracle.com/repo/OracleLinux/OL7/latest/x86_64/index.html</a></p>
<p> 安装时，可能会出现依赖包（软件），使用 yum 在线下载即可；</p>
</li>
<li><p>安装 oracle-database-ee-19c-1.0.1.x86_64.rpm；</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh oracle-database-ee-19c-1.0.1.x86_64.rpm</span><br></pre></td></tr></table></figure>

<p> 完成了软件安装，下一步就是创建数据库：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/oracledb_ORCLCDB-19c configure</span><br></pre></td></tr></table></figure></li>
</ol>
<br>

<h2 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h2><ol>
<li><p><strong>登录并启动 Oracle 数据库</strong></p>
<p> 切换身份到 oracle；</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su oracle</span><br></pre></td></tr></table></figure>

<p> 注意：在 Linux 中使用默认安装，会自动创建一个 oracle 用户，在这个用户下登录不需要正确的密码；同时，一些进程需要 oracle 用户启动，例如 lsnrctl start；</p>
<p> 启动 Oracle 数据库（实例）：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlplus <span class="operator">/</span> <span class="keyword">as</span> sysdba</span><br><span class="line">startup;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在 Windows 上 Oracle 的登录：</p>
<p>使用在安装 Oracle 数据库服务器期间设置的密码以 sys 用户身份登录；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请输入用户名：sys as sysdba</span><br><span class="line">输入口令：</span><br></pre></td></tr></table></figure>
</blockquote>
<p> 直接修改 sys 用户密码：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> sys identified <span class="keyword">by</span> sys1234;</span><br></pre></td></tr></table></figure>

<p> 接下来就可以使用账号密码像 Windows 一样直接调用 sqlplus 登录数据库了；</p>
</li>
<li><p><strong>配置环境变量</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ORACLE_BASE=/opt/oracle</span><br><span class="line"><span class="comment"># 正常使用 Oracle 的设置要求</span></span><br><span class="line"><span class="built_in">export</span> ORACLE_HOME=/opt/oracle/product/19c/dbhome_1</span><br><span class="line"><span class="comment"># 必须与数据库实例名称相同</span></span><br><span class="line"><span class="built_in">export</span> ORACLE_SID=ORCLCDB</span><br><span class="line"><span class="comment"># 可以直接执行 sqlplus 等命令</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;ORACLE_HOME&#125;</span>/bin</span><br></pre></td></tr></table></figure>

<p> <strong>注意：环境变量的配置是接下来登录和使用 oracle 数据库的基础</strong>；</p>
<ul>
<li><p>查看 Oracle 数据库名称：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> v$database;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看实例名称：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 方法一：sqlplus</span><br><span class="line"><span class="keyword">select</span> instance_name <span class="keyword">from</span> v$instance</span><br><span class="line"># 方法二：bash</span><br><span class="line">ps <span class="operator">-</span>ef <span class="operator">|</span> grep ora_</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>创建 PDB 数据库</strong></p>
<p> CDB 与 PDB 是 Oracle 引入的新特性，在 ORACLE 数据库引入的多租用户环境中，允许一个数据库容器（CDB）承载多个可插拔数据库（PDB）；</p>
<ul>
<li><strong>CDB相当于操作系统，调用并管理各个PDB</strong>；</li>
<li><strong>PDB相当于真正提供业务需求的数据库实例</strong>；</li>
</ul>
 <img src="1.png" style="zoom:50%;" />

<p> CDB 数据库的组成，主要分为三个部分：</p>
<ul>
<li><strong>ROOT 组件</strong>：又称 CDB$ROOT，存储着 ORACLE 提供的元数据和 Common User；Common User 是指在每个容器中都存在的用户；</li>
<li><strong>SEED 组件</strong>：又称 PDB$SEED，创建 PDBs 数据库的模板，用户不能在 seed 中添加或修改一个对象，一个 CDB 只能有一个 seed；</li>
<li><strong>PDBs</strong>：PDBs 向后兼容，可以进行大多数常规操作；</li>
</ul>
<p> 这些组件的每一个都可以被称为一个容器；每个容器在 CDB 中都有一个独一无二的 ID 和名称；</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> con_name;  # 显示当前容器名称 CDB$ROOT</span><br><span class="line"><span class="keyword">SELECT</span> con_id,dbid,guid,name,open_mode <span class="keyword">from</span> v$pdbs;  # 查看 CDB 中 PDBs</span><br><span class="line"><span class="keyword">show</span> pdbs;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果 CDB 中存在 PDB 数据库，状态为 MOUNTED，启动 PDB 数据库：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 方法一</span><br><span class="line"><span class="keyword">ALTER</span> PLUGGABLE DATABASE ORCLPDB1 <span class="keyword">OPEN</span>;</span><br><span class="line"># 方法二</span><br><span class="line"><span class="keyword">ALTER</span> SESSION <span class="keyword">SET</span> CONTAINER <span class="operator">=</span> ORCLPDB1;</span><br><span class="line">startup;</span><br></pre></td></tr></table></figure>

<p>  在 PDB 中创建本地用户（common user）：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> OT IDENTIFIED <span class="keyword">BY</span> ot1234;</span><br></pre></td></tr></table></figure>

<p>  如果用户想在 PDBORCL 中创建用户，却未设置会话 container 到 PDB，会因为在 CDB 中创建公有用户而无法通过名称或角色验证出错（c##）；</p>
</li>
<li><p>如果 CDB 中不存在 PDB 数据库，则需要创建：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create pluggable database pdborcl admin user ot identified by ot1234 roles=(connect) file_name_convert=(<span class="string">&#x27;/opt/oracle/oradata/ORCLCDB/pdbseed&#x27;</span>,<span class="string">&#x27;/opt/oracle/oradata/ORCLCDB/pdborcl&#x27;</span>);</span><br><span class="line"><span class="comment"># pdborcl : 创建的可插接式数据库</span></span><br><span class="line"><span class="comment"># ot : 创建的用户</span></span><br><span class="line"><span class="comment"># ot1234 : 密码</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>授权</strong></p>
<p> 使用以下 GRANT 语句授予 OT 用户权限：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT CONNECT, RESOURCE, DBA TO OT;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>切换到新账号</strong></p>
<ul>
<li><p><strong>语法</strong>：<code>sqlplus username/password@IP:port/pdb_name</code>；</p>
</li>
<li><p><strong>语法</strong>：<code>connect username/password@pdb_name</code>；</p>
</li>
</ul>
<p> 使用新账号进行登录：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一</span></span><br><span class="line">sqlplus ot@ORCLPDB1</span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line">CONNECT ot@ORCLPDB1</span><br></pre></td></tr></table></figure>

<ul>
<li><p>错误一：ORA-01017: invalid user&#x2F;password; logon denied；</p>
<p>  <strong>不能使用 connect 直接登录在 pdb 中创建的普通用户，普通用户登录需指定 pdb</strong>；</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlplus ot/ot1234@ORCLPDB1</span><br></pre></td></tr></table></figure>
</li>
<li><p>错误二：ORA-12154: TNS: 无法解析指定的连接标识符；</p>
<p>  配置 $ORACLE_HOME&#x2F;network&#x2F;admin&#x2F;tnsnames.ora 文件；</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># text 为将会先实现pl/sql登录界面数据库选项</span></span><br><span class="line">text=</span><br><span class="line">  (DESCRIPTION =</span><br><span class="line">    (ADDRESS_LIST =</span><br><span class="line">      (ADDRESS = (PROTOCOL = TCP)(HOST =127.0.0.1)(PORT = 1521))</span><br><span class="line">    )</span><br><span class="line">    (CONNECT_DATA =</span><br><span class="line">    	<span class="comment"># 这个 text 是数据库实例名，大小写敏感</span></span><br><span class="line">      (SERVICE_NAME  = text)</span><br><span class="line">    )</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>
</li>
<li><p>错误三：ORA-12541: TNS: no listener；</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 oracle 用户下</span></span><br><span class="line">lsnrctl start</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>通过 .sql 文件建表</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="string">&quot;.sql文件路径&quot;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<br>

<h2 id="服务自启动"><a href="#服务自启动" class="headerlink" title="服务自启动"></a>服务自启动</h2><p><strong>配置 dbstart 和 dbshut 文件</strong></p>
<ol>
<li><p>确认 $ORACLE_HOME 环境变量是否设置正确；</p>
</li>
<li><p>修改 $ORACLE_HOME&#x2F;bin&#x2F;dbstart 文件；</p>
<ul>
<li>将 <code>ORACLE_HOME_LISTNER=$1</code> 修改为 <code>ORACLE_HOME_LISTNER=$ORACLE_HOME</code>；</li>
<li>将 <code>ORACLE_HOME=$1; export ORACLE_HOME</code> 注释；</li>
</ul>
<p> 同理，可以修改 dbshut 文件；</p>
</li>
<li><p>编辑 &#x2F;etc&#x2F;oratab 文件，dbca 建库时会自动创建该文件；</p>
<p> 每一行都代表一个数据库实例，后面的 Y|N 选项代表开机是否自启动；</p>
 <figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ORCLCDB:/opt/oracle/product/19c/dbhome_1:Y</span><br></pre></td></tr></table></figure>
</li>
<li><p>最后，可以使用 dbstart 启动 Oracle 服务；</p>
<p> 可以查看启动日志，$ORACLE_HOME&#x2F;rdbms&#x2F;log&#x2F;startup.log；</p>
</li>
</ol>
<p><strong>将程序设置成系统服务</strong></p>
<ol>
<li><p>编辑系统服务软件，vim &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;oracle.service；</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=initiate oracle</span><br><span class="line">After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">LimitMEMLOCK=infinity</span><br><span class="line">LimitNOFILE=65535</span><br><span class="line">Type=oneshot</span><br><span class="line">RemainAfterExit=<span class="built_in">yes</span></span><br><span class="line">User=oracle</span><br><span class="line">Environment=<span class="string">&quot;ORACLE_HOME=/opt/oracle/product/19c/dbhome_1&quot;</span></span><br><span class="line">Environment=<span class="string">&quot;ORACLE_SID=ORCLCDB&quot;</span></span><br><span class="line">ExecStart=/opt/oracle/product/19c/dbhome_1/bin/dbstart</span><br><span class="line">ExecStop=/opt/oracle/product/19c/dbhome_1/bin/dbshut</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
</li>
<li><p>重新加载 service，<code>systemctl daemon-reload</code>；</p>
</li>
<li><p>查询 service 状态，<code>systemctl list-unit-files|grep oracle</code>；</p>
</li>
<li><p>进行 start、stop、enable 和 disable；</p>
</li>
</ol>
<br>

<h1 id="PL-x2F-SQL（Windows）"><a href="#PL-x2F-SQL（Windows）" class="headerlink" title="PL&#x2F;SQL（Windows）"></a>PL&#x2F;SQL（Windows）</h1><p>PLSQL 指的是 PLSQL developer 这个 Oracle 数据库客户端连接工具，这个工具以其方便和强大被广大开发者喜爱；</p>
<br>

<h2 id="远程连接数据库"><a href="#远程连接数据库" class="headerlink" title="远程连接数据库"></a>远程连接数据库</h2><ul>
<li><p>关系型数据库：MySQL、PostgreSQL、Oracle、Microsoft SQL Server；</p>
</li>
<li><p>非关系型数据库：MongoDB、Sybase；</p>
</li>
</ul>
<p>连接数据库时，通常可以使用两种不同的网络协议，即 SSH（Secure Shell）和 TCP。它们各自具有一些优点和缺点，选择哪种协议取决于你的具体需求和安全要求。</p>
<ol>
<li><p><strong>SSH 连接数据库</strong>：</p>
<p> 优点：</p>
<ul>
<li>安全性高：SSH 提供了加密通信，可以保护数据在传输过程中的安全性；</li>
<li>认证机制：SSH 提供了强大的身份验证和授权机制，可以确保只有授权用户可以连接到数据库服务器；</li>
<li>通用性：SSH 不仅可以用于连接数据库，还可以用于其他网络管理任务；</li>
</ul>
<p> 缺点：</p>
<ul>
<li>复杂性：SSH 连接通常需要额外的设置和配置，包括生成和管理 SSH 密钥对；</li>
<li>性能开销：SSH 加密和解密数据可能会引入一定的性能开销，特别是在处理大量数据时；</li>
</ul>
</li>
<li><p><strong>TCP 连接数据库</strong>：</p>
<p> 优点：</p>
<ul>
<li>简单性：TCP 连接通常比 SSH 连接更简单直接，不需要额外的加密和身份验证配置；</li>
<li>性能：由于没有 SSH 加密解密的开销，TCP 连接可能更快；</li>
<li>适用性：TCP 连接适用于那些不需要额外安全层的场景，例如，如果数据库服务器位于受物理安全保护的内部网络中，或者通过其他手段已经得到了足够的安全保护；</li>
</ul>
<p> 缺点：</p>
<ul>
<li>安全性较低：相对于 SSH，TCP 连接不提供数据的加密和身份验证；</li>
<li>数据保护：TCP 连接不提供数据的隐私保护，因此数据在传输过程中可能容易被窃听或篡改；</li>
</ul>
</li>
</ol>
<p>综合考虑，选择SSH还是TCP连接数据库取决于你的具体情况。如果安全性是首要考虑因素，或者你需要在不受信任的网络中传输敏感数据，那么SSH可能是更好的选择。但如果性能和简单性对你来说更为重要，并且你已经通过其他手段确保了网络的安全性，那么TCP连接可能是更合适的选项。最佳选择通常需要综合考虑安全、性能和操作复杂性等因素。</p>
<br>

<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><ol>
<li><p>下载 PLSQL 和 Oracle Instant Client，解压 Oracle Instant Client（instantclient-basic-windows.x64-19.20.0.0.0dbru）到 PLSQL 工作目录；</p>
</li>
<li><p>配置环境变量 ORACLE_HOME 和 TNS_ADMIN；</p>
<ul>
<li>ORACLE_HOME：<code>D:\Program Files\PLSQL\instantclient_19_20</code>；</li>
<li>TNS_ADMIN：<code>%ORACLE_HOME%\network\admin</code>；</li>
</ul>
</li>
<li><p>选择 OCI 库，这个文件会通过环境变量自动配置；</p>
 <img src="2.png" style="zoom:50%;" />

<p> 其中，OCI 库（oci.dll）位于 %ORACLE_HOME% 目录下；</p>
</li>
<li><p>在 %ORACLE_HOME%\network\admin 下，创建 tnsnames.ora 文件；</p>
<blockquote>
<p>tnsnames.ora 用在 oracle client 端，用户配置连接数据库的别名参数的网络服务配置文件。</p>
</blockquote>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ORCLPDB1 =</span><br><span class="line">    (DESCRIPTION =</span><br><span class="line">        (ADDRESS_LIST =</span><br><span class="line">            (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.40.40)(PORT = 1521))</span><br><span class="line">        )</span><br><span class="line">        (CONNECT_DATA =</span><br><span class="line">            (SERVICE_NAME = ORCLPDB1)</span><br><span class="line">        )</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p> 其中，Oracle 监听器（listener.ora）正在运行保持本机 1521 端口的监听；</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))</span><br></pre></td></tr></table></figure>
</li>
<li><p>连接数据库；</p>
 <img src="3.png" style="zoom:50%;" />

<p> 进行登录时，实际上就是 <code>sqlplus ot/ot1234@ORCLPDB1</code>；</p>
</li>
</ol>
<p>如果出现 ORA-12170: TNS:Connect timeout occurred 错误，需要考虑服务器防火墙的配置；<strong>开放端口，开放协议</strong>；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=1521/tcp</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<br>

<h2 id="防火墙相关"><a href="#防火墙相关" class="headerlink" title="防火墙相关"></a>防火墙相关</h2><p>防火墙（Firewall）技术是通过有机结合各类用于安全管理与筛选的软件和硬件设备，帮助计算机网络于其内、外网之间构建一道相对隔绝的保护屏障，以保护用户资料与信息安全性的一种技术。</p>
<p>firewalld 是 CentOS 7 的一大特性，最大的好处有两个：</p>
<ul>
<li>支持动态更新，不用重启服务；</li>
<li>加入了防火墙的 “zone” 概念；</li>
</ul>
<br>

<h3 id="systemctl"><a href="#systemctl" class="headerlink" title="systemctl"></a>systemctl</h3><ul>
<li><p>启动防火墙：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭防火墙：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>禁用防火墙：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看防火墙状态：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld.service</span><br></pre></td></tr></table></figure></li>
</ul>
<br>

<h3 id="firewall-cmd"><a href="#firewall-cmd" class="headerlink" title="firewall-cmd"></a>firewall-cmd</h3><p>firewall-cmd 是 firewalld 的字符界面管理工具；</p>
<ul>
<li><p>重启防火墙：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看防火墙：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --version  <span class="comment"># 版本</span></span><br><span class="line">firewall-cmd --state  <span class="comment"># 状态</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查看端口开放情况：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --query-port=80/tcp</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看开放的端口：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --list-ports  <span class="comment"># permanent 表示持久</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>开放端口：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=8080/tcp</span><br><span class="line">firewall-cmd --permanent --add-port=8083-8085/tcp</span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭端口：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --remove-port=8083-8085/tcp</span><br></pre></td></tr></table></figure></li>
</ul>
<br>

<h1 id="Oracle-基础知识"><a href="#Oracle-基础知识" class="headerlink" title="Oracle 基础知识"></a>Oracle 基础知识</h1><p>关于数据库语言的分类：</p>
<ul>
<li><p>DDL：数据库定义语言：create、drop；</p>
</li>
<li><p>DML：数据库操作语言：insert、update、delete；</p>
</li>
<li><p>DQL：数据库查询语言：select；</p>
</li>
<li><p>DCL：数据库控制语言：grant、revoke；</p>
</li>
</ul>
<br>

<h2 id="Select-语句"><a href="#Select-语句" class="headerlink" title="Select 语句"></a>Select 语句</h2><p>在表格中查询数据；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">DISTINCT</span>]</span><br><span class="line">	column_1,</span><br><span class="line">	column_2,</span><br><span class="line">	...</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	table_name;</span><br></pre></td></tr></table></figure>

<ul>
<li>DISTINCT：过滤结果集中的重复行；</li>
</ul>
<br>

<h2 id="Oracle-By-语句"><a href="#Oracle-By-语句" class="headerlink" title="Oracle By 语句"></a>Oracle By 语句</h2><p>用来对一列或多列的结果集按升序或降序进行排序：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	column_1,</span><br><span class="line">	column_2,</span><br><span class="line">	column_3,</span><br><span class="line">	...</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	column_1 [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>] [NULLS <span class="keyword">FIRST</span>] [NULLS <span class="keyword">LAST</span>],</span><br><span class="line">	column_2 [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>] [NULLS <span class="keyword">FIRST</span>] [NULLS <span class="keyword">LAST</span>]</span><br><span class="line"><span class="comment">/* 首先按 column_1 进行排序，以创建初始结果集</span></span><br><span class="line"><span class="comment">	然后按 column_2 对初始结果集进行排序 */</span></span><br></pre></td></tr></table></figure>

<p><strong>请注意，ORDER BY 子句总是 SELECT 语句中的最后一个子句</strong>；</p>
<p>在 ORDER BY 子句中使用函数或表达式排序数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id, name</span><br><span class="line"><span class="keyword">FROM</span> customers</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">UPPER</span>(name);</span><br></pre></td></tr></table></figure>

<br>

<h2 id="Where-子句"><a href="#Where-子句" class="headerlink" title="Where 子句"></a>Where 子句</h2><p>指定过滤的条件返回符合查询条件的行记录：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	column_1,</span><br><span class="line">	column_2,</span><br><span class="line">	...</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	table_name</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	search_condition</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	column_1,</span><br><span class="line">	column_2;</span><br></pre></td></tr></table></figure>

<p>WHERE 子句出现在 FROM 字句之后，ORDER BY 子句之前；</p>
<p>除了 SELECT 子句之外，还可以使用 DELETE 或 UPDATE 语句中的 WHERE 子句来指定要删除或更新的行记录；</p>
<p>Oracle 中提供的比较运算符：</p>
<table>
<thead>
<tr>
<th>编号</th>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>=</code></td>
<td>等于</td>
</tr>
<tr>
<td>2</td>
<td><code>!=</code>, <code>&lt;&gt;</code></td>
<td>不等于</td>
</tr>
<tr>
<td>3</td>
<td><code>&gt;</code></td>
<td>大于</td>
</tr>
<tr>
<td>4</td>
<td><code>&lt;</code></td>
<td>小于</td>
</tr>
<tr>
<td>5</td>
<td><code>&gt;=</code></td>
<td>大于等于</td>
</tr>
<tr>
<td>6</td>
<td><code>&lt;=</code></td>
<td>小于等于</td>
</tr>
<tr>
<td>7</td>
<td><code>IN</code></td>
<td>等于值列表中的任何值</td>
</tr>
<tr>
<td>8</td>
<td><code>ANY/SOME/ALL</code></td>
<td>将值与列表或子查询进行比较<br>必须以另一种运算符（&#x3D;, &gt;, &lt;）作为前缀</td>
</tr>
<tr>
<td>9</td>
<td><code>NOT IN</code></td>
<td>不等于值列表中的任何值</td>
</tr>
<tr>
<td>10</td>
<td><code>[NOT] BETWEEN n AND m</code></td>
<td>相当于 [NOT] &gt;&#x3D;n 且 &lt;&#x3D;m</td>
</tr>
<tr>
<td>11</td>
<td><code>[NOT] EXISTS</code></td>
<td>如果子查询返回至少一行，则返回 true</td>
</tr>
<tr>
<td>12</td>
<td><code>IS [NOT] NULL</code></td>
<td>测试 NULL 的值</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    order_id,</span><br><span class="line">    customer_id,</span><br><span class="line">    status,</span><br><span class="line">    TO_CHAR(order_date, <span class="string">&#x27;YYYY-MM-DD&#x27;</span>) <span class="keyword">AS</span> order_date</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    orders</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    status <span class="operator">=</span> <span class="string">&#x27;Shipped&#x27;</span></span><br><span class="line">    <span class="keyword">AND</span> salesman_id <span class="operator">=</span> <span class="number">60</span></span><br><span class="line">    <span class="keyword">AND</span> <span class="built_in">EXTRACT</span>(<span class="keyword">YEAR</span> <span class="keyword">FROM</span> order_date) <span class="operator">=</span> <span class="number">2017</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">    order_date;</span><br></pre></td></tr></table></figure>

<br>

<h2 id="Fetch-子句"><a href="#Fetch-子句" class="headerlink" title="Fetch 子句"></a>Fetch 子句</h2><p>可以用来限制查询返回的行数：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="keyword">OFFSET</span> <span class="keyword">offset</span> <span class="keyword">ROWS</span>]</span><br><span class="line"> <span class="keyword">FETCH</span>  NEXT [  row_count <span class="operator">|</span> <span class="keyword">percent</span> <span class="keyword">PERCENT</span>  ] <span class="keyword">ROWS</span>  [ <span class="keyword">ONLY</span> <span class="operator">|</span> <span class="keyword">WITH</span> TIES ]</span><br></pre></td></tr></table></figure>

<p>OFFSET 子句指定在行限制开始之前要跳过行数；如果跳过它，则偏移量为 0；</p>
<p>偏移量必须是一个数字或一个表达式，其值为一个数字：</p>
<ul>
<li>如果偏移量是负值，则将其视为 0；</li>
<li>如果偏移量为 NULL 或大于查询返回的行数，则不返回任何行；</li>
<li>如果偏移量包含一个分数，则分数部分被截断；</li>
</ul>
<p>WITH TIES 返回与最后一行相同的排序键，也就是，只有存在 ORDER BY 子句，才会返回额外的行；</p>
<p>以下查询将跳过库存量最高的前 10 个产品，并返回接下来的 10 个产品：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> product_name,</span><br><span class="line"> quantity</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line"> inventories</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> products</span><br><span class="line"> <span class="keyword">USING</span>(product_id)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line"> quantity <span class="keyword">DESC</span> </span><br><span class="line"><span class="keyword">OFFSET</span> <span class="number">10</span> <span class="keyword">ROWS</span> </span><br><span class="line"><span class="keyword">FETCH</span> NEXT <span class="number">10</span> <span class="keyword">ROWS</span> <span class="keyword">ONLY</span>;</span><br></pre></td></tr></table></figure>

<br>

<h1 id="Oracle-事务"><a href="#Oracle-事务" class="headerlink" title="Oracle 事务"></a>Oracle 事务</h1><p>事务在数据库中是工作的逻辑单元，单个事务是由一个或多个完成一组的相关行为的 SQL 语句组成；</p>
<p>通过事务机制，可以确保这一组 SQL 语句所作的操作要么都成功执行，完成整个工作单元操作，要么一个也不执行；</p>
<p>即，数据库中事务的基本特性（ACID）：</p>
<ul>
<li><strong>原子性（Atomicity）</strong>：一个事务里所有包含的 SQL 语句都是一个整体，不可分割；</li>
<li><strong>一致性（Consistency）</strong>：事务开始时，数据库中的数据是一致的，事务结束时，数据库的数据也应该是一致的；</li>
<li><strong>隔离性（Isolation）</strong>：数据库允许多个并发事务同时对其中的数据进行读写和修改的能力，隔离性可以防止事务在并发执行时，由于他们的操作命令交叉执行而导致的数据不一致状态；</li>
<li><strong>持久性（Durability）</strong>：当事务结束后，它对数据库中的影响是永久的，即使系统遇到故障的情况下，数据也不会丢失；</li>
</ul>
<br>

<h2 id="COMMIT-语句"><a href="#COMMIT-语句" class="headerlink" title="COMMIT 语句"></a>COMMIT 语句</h2><p>在 Oracle 中，COMMIT 语句可以用来提交当前事务的所有更改：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COMMIT</span> [ WORK ] [ COMMENT clause ] [ WRITE clause ] [ FORCE clause ];</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li><p><code>WORK</code>：被 Oracle 添加为符合 SQL 标准。使用或不使用没有影响；</p>
</li>
<li><p><code>COMMENT clause</code>：用于指定与当前事务关联的注释，最多 255 字节；</p>
</li>
<li><p><code>WRITE clause</code>：用于指定将已提交事务的重做信息写入重做日志的优先级。用这个子句，有两个参数可以指定：</p>
<ul>
<li>WAIT（默认）或 NOWAIT；</li>
<li>IMMEDIATE（默认）或 BATCH；</li>
</ul>
</li>
<li><p><code>FORCE clause</code>：用于强制提交可能已损坏或有疑问的事务，可以用 3 种方式指定：</p>
<p>  <code>FORCE&#39;string&#39;, [integer]</code>，<code>FORCE CORRUPT_XID&#39;string&#39;</code> 或 <code>FORCE CORRUPT_XID_ALL</code>；</p>
</li>
</ul>
<p>注意：</p>
<ul>
<li>必须拥有 DBA 权限才能访问系统视图，DBA_2PC_PENDING 和 V$CORRUPT_XID_LIST；</li>
<li>必须拥有 DBA 权限才能指定 COMMIT 语句的某些功能；</li>
</ul>
<br>

<h2 id="ROLLBACK-语句"><a href="#ROLLBACK-语句" class="headerlink" title="ROLLBACK 语句"></a>ROLLBACK 语句</h2><p>用来撤销当前事务或有问题的事务：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ROLLBACK</span> [ WORK ] [ <span class="keyword">TO</span> [<span class="keyword">SAVEPOINT</span>] savepoint_name <span class="operator">|</span> FORCE <span class="string">&#x27;string&#x27;</span> ];</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li><code>WORK</code>：被 Oracle 添加以符合 SQL 标准；</li>
<li><code>TO SAVEPOINT savepoint_name</code>：撤销当前会话的所有更改，直到保存点；如果省略该子句，则所有更改都将被撤销；</li>
<li><code>FORCE &#39;string&#39;</code>：用于强制回滚可能已损坏或有问题的事务，单引号内为事务 ID；</li>
</ul>
<p>使用保存点（savepoint）来标记事务中的一个特定点，部分撤消已经完成的操作，而无需回滚整个事务；</p>
<br>

<h2 id="SET-TRANSACTION-语句"><a href="#SET-TRANSACTION-语句" class="headerlink" title="SET TRANSACTION 语句"></a>SET TRANSACTION 语句</h2><p>用来设置事务的各种状态，比如只读、读&#x2F;写、隔离级别，为事务分配名称或将事务分配回滚段等等：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> TRANSACTION [ READ <span class="keyword">ONLY</span> <span class="operator">|</span> READ WRITE ]</span><br><span class="line">                [ ISOLATION LEVEL [ SERIALIZE <span class="operator">|</span> READ COMMITED ]</span><br><span class="line">                [ USE <span class="keyword">ROLLBACK</span> SEGMENT <span class="string">&#x27;segment_name&#x27;</span> ]</span><br><span class="line">                [ NAME <span class="string">&#x27;transaction_name&#x27;</span> ];</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li><code>ISOLATION LEVEL</code>：有两个选项：<ul>
<li><code>ISOLATION LEVEL SERIALIZE</code>：如果事务尝试更新由另一个事务更新并未提交的资源，则事务将失败；</li>
<li><code>ISOLATION LEVEL READ COMMITTED</code>：如果事务需要另一个事务持有的行锁，则事务将等待，直到行锁被释放；</li>
</ul>
</li>
<li><code>USE ROLLBACK SEGMENT</code>：将事务分配给由 segment_name 标识的回退段；</li>
</ul>
<br>

<h2 id="LOCK-TABLE-语句"><a href="#LOCK-TABLE-语句" class="headerlink" title="LOCK TABLE 语句"></a>LOCK TABLE 语句</h2><p>用来锁定表、表分区或表子分区：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOCK <span class="keyword">TABLE</span> tables <span class="keyword">IN</span> lock_mode MODE [ WAIT [, <span class="type">integer</span>] <span class="operator">|</span> NOWAIT];</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li><p>tables：用逗号分隔的表列表；</p>
</li>
<li><p>lock_mode：</p>
<table>
<thead>
<tr>
<th>lock_mode</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ROW SHARE</td>
<td>允许同时访问表，但阻止用户锁定整个表以进行独占访问。</td>
</tr>
<tr>
<td>ROW EXCLUSIVE</td>
<td>允许对表进行并发访问，但阻止用户以独占访问方式锁定整个表并以共享方式锁定表。</td>
</tr>
<tr>
<td>SHARE UPDATE</td>
<td>允许同时访问表，但阻止用户锁定整个表以进行独占访问。</td>
</tr>
<tr>
<td>SHARE</td>
<td>允许并发查询，但用户无法更新锁定的表。</td>
</tr>
<tr>
<td>SHARE ROW EXCLUSIVE</td>
<td>用户可以查看表中的记录，但无法更新表或锁定 SHARE 表中的表。</td>
</tr>
<tr>
<td>EXCLUSIVE</td>
<td>允许查询锁定的表格，但不能进行其他活动。</td>
</tr>
</tbody></table>
</li>
<li><p>WAIT：指定数据库将等待以获取 DML 锁定；</p>
</li>
<li><p>NOWAIT：指定数据库不应该等待释放锁；</p>
</li>
</ul>
<br>

<h1 id="Oracle-外键"><a href="#Oracle-外键" class="headerlink" title="Oracle 外键"></a>Oracle 外键</h1><p>外键用于与另一张表的关联，用于保持数据的一致性；</p>
<br>

<h2 id="Oracle-外键创建"><a href="#Oracle-外键创建" class="headerlink" title="Oracle 外键创建"></a>Oracle 外键创建</h2><p>在 Oracle 数据库中，外键是强制实施参照完整性的一种方式，被引用的表称为父表，而带有外键的表称为子表；</p>
<ul>
<li><p>使用 CREATE TABLE 语句创建外键：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line">(</span><br><span class="line">	column1 datatype <span class="keyword">null</span><span class="operator">/</span><span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	column2 datatype <span class="keyword">null</span><span class="operator">/</span><span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">	<span class="keyword">CONSTRAINT</span> fk_column</span><br><span class="line">		<span class="keyword">FOREIGN</span> KEY (column1, column2, ... column_n)</span><br><span class="line">		<span class="keyword">REFERENCES</span> parent_table (column1, column2, ... column_n)</span><br><span class="line">  	[<span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>  例如，在 supplier 表上创建 supplier_pk 主键，只包含一个 supplier_id 字段；然后，在 products 表上创建 fk_supplier 外键，根据 supplier_id 字段引用 supplier 表；</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> supplier</span><br><span class="line">(</span><br><span class="line">	supplier_id <span class="type">numeric</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	supplier_name varchar2(<span class="number">50</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	contact_name varchar2(<span class="number">50</span>),</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> supplier_pk <span class="keyword">PRIMARY</span> KEY (supplier_id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> products</span><br><span class="line">(</span><br><span class="line">	product_id <span class="type">numeric</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	supplier_id <span class="type">numeric</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> fk_supplier</span><br><span class="line">		<span class="keyword">FOREIGN</span> KEY (supplier_id)</span><br><span class="line">		<span class="keyword">REFERENCES</span> supplier(supplier_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 ALTER TABLE 语句创建外键：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> constraint_name</span><br><span class="line">	<span class="keyword">FOREIGN</span> KEY (column1, column2, ... column_n)</span><br><span class="line">	<span class="keyword">REFERENCES</span> parent_table (column1, column2, ... column_n)</span><br><span class="line">	[<span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE];</span><br></pre></td></tr></table></figure>
<p>  例如：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> products</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_supplier</span><br><span class="line">	<span class="keyword">FOREIGN</span> KEY (supplier_id, supplier_name)</span><br><span class="line">	<span class="keyword">REFERENCES</span> supplier(supplier_id, supplier_name);</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>注意</strong>：通过 <code>ON DELETE CASCADE</code> 定义<strong>级联删除</strong>，当主表中的一条记录被删除，那么子表中所关联的记录也相应的自动删除。</p>
<br>

<h2 id="Oracle-删除外键"><a href="#Oracle-删除外键" class="headerlink" title="Oracle 删除外键"></a>Oracle 删除外键</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> &quot;表名&quot; <span class="keyword">drop</span> <span class="keyword">constraint</span> &quot;外键名&quot;</span><br></pre></td></tr></table></figure>

<br>

<h2 id="Oracle-禁用-x2F-启用外键"><a href="#Oracle-禁用-x2F-启用外键" class="headerlink" title="Oracle 禁用&#x2F;启用外键"></a>Oracle 禁用&#x2F;启用外键</h2><ul>
<li><p>禁用：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line">DISABLE <span class="keyword">CONSTRAINT</span> constraint_name;</span><br></pre></td></tr></table></figure>
</li>
<li><p>启用：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line">ENABLE <span class="keyword">CONSTRAINT</span> constraint_name;</span><br></pre></td></tr></table></figure></li>
</ul>
<br>

<h1 id="Oracle-字符串函数"><a href="#Oracle-字符串函数" class="headerlink" title="Oracle 字符串函数"></a>Oracle 字符串函数</h1><br>

<h2 id="ASCII-函数"><a href="#ASCII-函数" class="headerlink" title="ASCII 函数"></a>ASCII 函数</h2><p>返回代表指定字符的数字值代码；</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ASCII( single_character )</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li>single_character：如果输入多个字符，只返回第一个字符的值；</li>
</ul>
<br>

<h2 id="ASCIISTR-函数"><a href="#ASCIISTR-函数" class="headerlink" title="ASCIISTR 函数"></a>ASCIISTR 函数</h2><p>将任何字符集中的字符串转换为 ASCII 字符串；</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ASCIISTR( string )</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ASCIISTR(<span class="string">&#x27;A B C Õ Ø&#x27;</span>)</span><br><span class="line"><span class="comment">-- Result: &#x27;A B C 0D5 0D8&#x27;</span></span><br></pre></td></tr></table></figure>

<br>

<h2 id="CHR-函数"><a href="#CHR-函数" class="headerlink" title="CHR 函数"></a>CHR 函数</h2><p>根据数字代码返回字符，其功能与 ASCII 函数相反；</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHR( number_code )</span><br></pre></td></tr></table></figure>

<br>

<h2 id="COMPOSE-函数"><a href="#COMPOSE-函数" class="headerlink" title="COMPOSE 函数"></a>COMPOSE 函数</h2><p>返回一个 Unicode 字符串；</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMPOSE( string )</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li>string：用于创建 Unicode 字符串的输入值，可以是 char、varchar2、nchar、nvarchar2、clob 或 nclob；</li>
</ul>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">COMPOSE(<span class="string">&#x27;o&#x27;</span> <span class="operator">||</span> unistr(<span class="string">&#x27;\0308&#x27;</span>) )</span><br><span class="line"><span class="comment">-- Result: ö</span></span><br><span class="line"></span><br><span class="line">COMPOSE(<span class="string">&#x27;a&#x27;</span> <span class="operator">||</span> unistr(<span class="string">&#x27;\0302&#x27;</span>) )</span><br><span class="line"><span class="comment">-- Result: â</span></span><br><span class="line"></span><br><span class="line">COMPOSE(<span class="string">&#x27;e&#x27;</span> <span class="operator">||</span> unistr(<span class="string">&#x27;\0301&#x27;</span>) )</span><br><span class="line"><span class="comment">-- Result: é</span></span><br></pre></td></tr></table></figure>

<br>

<h2 id="CONCAT-函数"><a href="#CONCAT-函数" class="headerlink" title="CONCAT 函数"></a>CONCAT 函数</h2><p>将两个字符串连接在一起；如果需要连接多个值，那么我们可以嵌套多个 CONCAT 函数调用；</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CONCAT( string1, string2 )</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CONCAT(<span class="string">&#x27;Let&#x27;&#x27;s&#x27;</span>, <span class="string">&#x27; learn Oracle&#x27;</span>)</span><br><span class="line"><span class="comment">-- Result: Let&#x27;s learn Oracle</span></span><br></pre></td></tr></table></figure>

<p>注意：两个 <code>&#39;&#39;</code> 表示一个 <code>&#39;</code>（单引号）；</p>
<br>

<h2 id="连接运算符"><a href="#连接运算符" class="headerlink" title="|| 连接运算符"></a>|| 连接运算符</h2><p>将两个或两个以上的字符串连接在一起；</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string1 <span class="operator">||</span> string2 [ <span class="operator">||</span> string_n ]</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;Dave&#x27;</span> <span class="operator">||</span> <span class="string">&#x27; &#x27;</span> <span class="operator">||</span> <span class="string">&#x27;Anderson&#x27;</span></span><br><span class="line"><span class="comment">-- Result: Dave Anderson</span></span><br></pre></td></tr></table></figure>

<br>

<h2 id="CONVERT-函数"><a href="#CONVERT-函数" class="headerlink" title="CONVERT 函数"></a>CONVERT 函数</h2><p>将字符串从一个字符集转换为另一个字符集；</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONVERT</span>( string1, char_set_to [, char_set_from] )</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li>string1：要转换的字符串；</li>
<li>char_set_to：要转换为的字符集；</li>
<li>char_set_from：可选，要从中转换的字符集；</li>
</ul>
<table>
<thead>
<tr>
<th>字符集</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>US7ASCII</td>
<td>美国 7 位 ASCII 字符集</td>
</tr>
<tr>
<td>WE8DEC</td>
<td>西欧 8 位字符集</td>
</tr>
<tr>
<td>WE8HP</td>
<td>惠普西欧 Laserjet8 位字符集</td>
</tr>
<tr>
<td>F7DEC</td>
<td>DEC 法语 7 位字符集</td>
</tr>
<tr>
<td>WE8EBCDIC500</td>
<td>IBM 西欧 EBCDIC 代码第 500 页</td>
</tr>
<tr>
<td>WE8PC850</td>
<td>IBM PC 代码第 850 页</td>
</tr>
<tr>
<td>WE8ISO8859P1</td>
<td>ISO 8859-1 西欧 8 位字符集</td>
</tr>
</tbody></table>
<br>

<h2 id="DUMP-函数"><a href="#DUMP-函数" class="headerlink" title="DUMP 函数"></a>DUMP 函数</h2><p>可以返回一个 varchar2 值，包含数据类型代码、字节长度和表达式的内部表示形式；</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DUMP( expression [, return_format] [, start_position] [, length] )</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<ul>
<li><p>expression：要分析的表达式；</p>
</li>
<li><p>return_format：决定了返回值的格式，该参数可以是一下任何值：</p>
<table>
<thead>
<tr>
<th>值</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>8</td>
<td>八进制符号</td>
</tr>
<tr>
<td>10</td>
<td>十进制符号</td>
</tr>
<tr>
<td>16</td>
<td>十六进制符号</td>
</tr>
<tr>
<td>17</td>
<td>单个字符</td>
</tr>
<tr>
<td>1008</td>
<td>带字符集名称的八进制符号</td>
</tr>
<tr>
<td>1010</td>
<td>带字符集名称的十进制符号</td>
</tr>
<tr>
<td>1016</td>
<td>带字符集名称的十六进制符号</td>
</tr>
<tr>
<td>1017</td>
<td>带字符集名称的单个字符</td>
</tr>
</tbody></table>
</li>
<li><p>start_position：可选，要返回的内部表示的起始位置；</p>
</li>
<li><p>length：可选，要返回的内部表示的长度；</p>
</li>
</ul>
<p>如果省略了 return_format、start_position 和 length 参数，则 DUMP 函数将以十进制表示形式返回整个内部表示形式；</p>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DUMP(<span class="string">&#x27;Tech&#x27;</span>)</span><br><span class="line"><span class="comment">-- Result: &#x27;Typ=96 Len=4: 84,101,99,104&#x27;</span></span><br><span class="line"></span><br><span class="line">DUMP(<span class="string">&#x27;Tech&#x27;</span>, <span class="number">10</span>)</span><br><span class="line"><span class="comment">-- Result: &#x27;Typ=96 Len=4: 84,101,99,104&#x27;</span></span><br><span class="line"></span><br><span class="line">DUMP(<span class="string">&#x27;Tech&#x27;</span>, <span class="number">16</span>)</span><br><span class="line"><span class="comment">-- Result: &#x27;Typ=96 Len=4: 54,65,63,68&#x27;</span></span><br><span class="line"></span><br><span class="line">DUMP(<span class="string">&#x27;Tech&#x27;</span>, <span class="number">1016</span>)</span><br><span class="line"><span class="comment">-- Result: &#x27;Typ=96 Len=4 CharacterSet=US7ASCII: 54,65,63,68&#x27;</span></span><br><span class="line"></span><br><span class="line">DUMP(<span class="string">&#x27;Tech&#x27;</span>, <span class="number">1017</span>)</span><br><span class="line"><span class="comment">-- Result: &#x27;Typ=96 Len=4 CharacterSet=US7ASCII: T,e,c,h&#x27;</span></span><br></pre></td></tr></table></figure>

<br>

<h2 id="INITCAP-函数"><a href="#INITCAP-函数" class="headerlink" title="INITCAP 函数"></a>INITCAP 函数</h2><p>将每个单词中的第一个字符设置为大写，其余设置为小写；</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INITCAP( string1 )</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INITCAP(<span class="string">&#x27;tech on the oraok&#x27;</span>);</span><br><span class="line"><span class="comment">-- Result: &#x27;Tech On The Oraok&#x27;</span></span><br><span class="line"></span><br><span class="line">INITCAP(<span class="string">&#x27;GEORGE BURNS&#x27;</span>);</span><br><span class="line"><span class="comment">-- Result: &#x27;George Burns&#x27;</span></span><br></pre></td></tr></table></figure>

<br>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/运维/">运维</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/数据库/">数据库</a>
    </span>
    

    </div>

    
  </div>
</article>

  






    </main>

    <footer class="site-footer">
  <p class="site-info">
    Deployed by <a href="https://github.com/kaedea/notion-down" target="_blank">notion-down</a> and
    Theme by <a href="https://github.com/kaedea/hexo-theme-hacker" target="_blank">hexo-theme-hacker</a>
    </br>
    
    &copy; 2023 a-pin
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>